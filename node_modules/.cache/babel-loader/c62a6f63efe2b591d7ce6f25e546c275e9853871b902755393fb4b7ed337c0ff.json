{"ast":null,"code":"var _jsxFileName = \"D:\\\\Web Development\\\\keeper-part-3-completed\\\\src\\\\components\\\\DropboxSync.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\n\n// Dropbox JS SDK via CDN (for browser)\nconst DROPBOX_SDK_URL = \"https://unpkg.com/dropbox/dist/Dropbox-sdk.min.js\";\nfunction loadDropboxSdk(cb) {\n  if (window.Dropbox) return cb();\n  const script = document.createElement(\"script\");\n  script.src = DROPBOX_SDK_URL;\n  script.onload = cb;\n  document.body.appendChild(script);\n}\nexport default function DropboxSync(_ref) {\n  _s();\n  let {\n    data,\n    onRestore,\n    compact\n  } = _ref;\n  const [token, setToken] = useState(localStorage.getItem(\"keeper-dropbox-token\") || \"\");\n  const [status, setStatus] = useState(\"\");\n  function handleTokenChange(e) {\n    setToken(e.target.value);\n    localStorage.setItem(\"keeper-dropbox-token\", e.target.value);\n  }\n  function uploadToDropbox() {\n    if (!token) return alert(\"Please enter your Dropbox access token.\");\n    loadDropboxSdk(() => {\n      const dbx = new window.Dropbox.Dropbox({\n        accessToken: token\n      });\n      setStatus(\"Uploading...\");\n      dbx.filesUpload({\n        path: \"/keeper-notes-backup.json\",\n        contents: JSON.stringify(data, null, 2),\n        mode: {\n          \".tag\": \"overwrite\"\n        }\n      }).then(() => setStatus(\"Backup uploaded to Dropbox!\")).catch(err => setStatus(\"Upload failed: \" + err.message));\n    });\n  }\n  function downloadFromDropbox() {\n    if (!token) return alert(\"Please enter your Dropbox access token.\");\n    loadDropboxSdk(() => {\n      const dbx = new window.Dropbox.Dropbox({\n        accessToken: token\n      });\n      setStatus(\"Downloading...\");\n      dbx.filesDownload({\n        path: \"/keeper-notes-backup.json\"\n      }).then(res => {\n        const reader = new FileReader();\n        reader.onload = evt => {\n          try {\n            const json = JSON.parse(evt.target.result);\n            onRestore(json);\n            setStatus(\"Backup restored from Dropbox!\");\n          } catch {\n            setStatus(\"Downloaded file is invalid/corrupt.\");\n          }\n        };\n        reader.readAsText(res.fileBlob);\n      }).catch(err => setStatus(\"Download failed: \" + err.message));\n    });\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `dropbox-sync${compact ? ' dropbox-sync-compact' : ''}`,\n    style: compact ? {\n      boxShadow: 'none',\n      background: 'transparent',\n      padding: 0,\n      margin: 0,\n      maxWidth: 'none',\n      alignItems: 'center',\n      gap: 4\n    } : {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      fontWeight: 600,\n      fontSize: '1em',\n      color: 'var(--accent,#f7b731)',\n      marginRight: 8\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, \"Dropbox\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: token,\n    onChange: handleTokenChange,\n    placeholder: \"Access token\",\n    style: {\n      width: compact ? 120 : '100%',\n      marginBottom: compact ? 0 : 8,\n      fontSize: '0.96em',\n      padding: '0.3em 0.5em',\n      borderRadius: 5,\n      border: '1px solid #e0e0e0'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: uploadToDropbox,\n    style: {\n      fontSize: '0.96em',\n      padding: '0.3em 0.7em',\n      marginLeft: 4\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, \"\\u2B06\\uFE0F\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: downloadFromDropbox,\n    style: {\n      fontSize: '0.96em',\n      padding: '0.3em 0.7em',\n      marginLeft: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, \"\\u2B07\\uFE0F\"), /*#__PURE__*/React.createElement(\"a\", {\n    href: \"https://www.dropbox.com/developers/apps\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    style: {\n      fontSize: '0.92em',\n      marginLeft: 6\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, \"\\uD83D\\uDD11\"), status && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      fontSize: '0.92em',\n      marginLeft: 8,\n      color: '#888',\n      display: 'inline-block'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 18\n    }\n  }, status));\n}\n_s(DropboxSync, \"V9vzRjsgZGpUVH3Sk4Kyov8kg+E=\");\n_c = DropboxSync;\nvar _c;\n$RefreshReg$(_c, \"DropboxSync\");","map":{"version":3,"names":["React","useState","DROPBOX_SDK_URL","loadDropboxSdk","cb","window","Dropbox","script","document","createElement","src","onload","body","appendChild","DropboxSync","_ref","_s","data","onRestore","compact","token","setToken","localStorage","getItem","status","setStatus","handleTokenChange","e","target","value","setItem","uploadToDropbox","alert","dbx","accessToken","filesUpload","path","contents","JSON","stringify","mode","then","catch","err","message","downloadFromDropbox","filesDownload","res","reader","FileReader","evt","json","parse","result","readAsText","fileBlob","className","style","boxShadow","background","padding","margin","maxWidth","alignItems","gap","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","fontWeight","fontSize","color","marginRight","type","onChange","placeholder","width","marginBottom","borderRadius","border","onClick","marginLeft","href","rel","display","_c","$RefreshReg$"],"sources":["D:/Web Development/keeper-part-3-completed/src/components/DropboxSync.js"],"sourcesContent":["import React, { useState } from \"react\";\n\n// Dropbox JS SDK via CDN (for browser)\nconst DROPBOX_SDK_URL = \"https://unpkg.com/dropbox/dist/Dropbox-sdk.min.js\";\n\nfunction loadDropboxSdk(cb) {\n  if (window.Dropbox) return cb();\n  const script = document.createElement(\"script\");\n  script.src = DROPBOX_SDK_URL;\n  script.onload = cb;\n  document.body.appendChild(script);\n}\n\nexport default function DropboxSync({ data, onRestore, compact }) {\n  const [token, setToken] = useState(localStorage.getItem(\"keeper-dropbox-token\") || \"\");\n  const [status, setStatus] = useState(\"\");\n\n  function handleTokenChange(e) {\n    setToken(e.target.value);\n    localStorage.setItem(\"keeper-dropbox-token\", e.target.value);\n  }\n\n  function uploadToDropbox() {\n    if (!token) return alert(\"Please enter your Dropbox access token.\");\n    loadDropboxSdk(() => {\n      const dbx = new window.Dropbox.Dropbox({ accessToken: token });\n      setStatus(\"Uploading...\");\n      dbx.filesUpload({\n        path: \"/keeper-notes-backup.json\",\n        contents: JSON.stringify(data, null, 2),\n        mode: { \".tag\": \"overwrite\" }\n      })\n        .then(() => setStatus(\"Backup uploaded to Dropbox!\"))\n        .catch(err => setStatus(\"Upload failed: \" + err.message));\n    });\n  }\n\n  function downloadFromDropbox() {\n    if (!token) return alert(\"Please enter your Dropbox access token.\");\n    loadDropboxSdk(() => {\n      const dbx = new window.Dropbox.Dropbox({ accessToken: token });\n      setStatus(\"Downloading...\");\n      dbx.filesDownload({ path: \"/keeper-notes-backup.json\" })\n        .then(res => {\n          const reader = new FileReader();\n          reader.onload = evt => {\n            try {\n              const json = JSON.parse(evt.target.result);\n              onRestore(json);\n              setStatus(\"Backup restored from Dropbox!\");\n            } catch {\n              setStatus(\"Downloaded file is invalid/corrupt.\");\n            }\n          };\n          reader.readAsText(res.fileBlob);\n        })\n        .catch(err => setStatus(\"Download failed: \" + err.message));\n    });\n  }\n\n  return (\n    <div className={`dropbox-sync${compact ? ' dropbox-sync-compact' : ''}`} style={compact ? {boxShadow:'none',background:'transparent',padding:0,margin:0,maxWidth:'none',alignItems:'center',gap:4} : {}}>\n      <span style={{fontWeight:600, fontSize:'1em', color:'var(--accent,#f7b731)', marginRight:8}}>Dropbox</span>\n      <input\n        type=\"text\"\n        value={token}\n        onChange={handleTokenChange}\n        placeholder=\"Access token\"\n        style={{ width: compact ? 120 : '100%', marginBottom: compact ? 0 : 8, fontSize:'0.96em', padding:'0.3em 0.5em', borderRadius:5, border:'1px solid #e0e0e0' }}\n      />\n      <button onClick={uploadToDropbox} style={{fontSize:'0.96em',padding:'0.3em 0.7em',marginLeft:4}}>‚¨ÜÔ∏è</button>\n      <button onClick={downloadFromDropbox} style={{fontSize:'0.96em',padding:'0.3em 0.7em',marginLeft:2}}>‚¨áÔ∏è</button>\n      <a href=\"https://www.dropbox.com/developers/apps\" target=\"_blank\" rel=\"noopener noreferrer\" style={{fontSize:'0.92em',marginLeft:6}}>üîë</a>\n      {status && <div style={{ fontSize:'0.92em',marginLeft:8,color:'#888',display:'inline-block' }}>{status}</div>}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}